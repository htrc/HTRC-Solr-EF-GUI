<div>
<!--
  <link href="assets/solr-ef/assets/flat.css" rel="stylesheet" />
  <link href="assets/solr-ef/assets/font-awesome.css" rel="stylesheet" />
  <link href="assets/solr-ef/assets/tomorrow.css" rel="stylesheet" />
-->
<!--
  <link href="assets/solr-ef/assets/jquery-ui-lightness-1.12.1/jquery-ui.min.css" rel="stylesheet" />

  <link href="assets/solr-ef/assets/paging.css" rel="stylesheet" />
  <link href="assets/solr-ef/dev/SolrEF.css" rel="stylesheet" />
  <link href="assets/solr-ef/dev/SolrEF-jsx.css" rel="stylesheet" /> !-- **** --
  <link href="assets/solr-ef/dev/SolrEF-progressbar.css" rel="stylesheet" />
-->

  <!-- **solr-ef-container:start -->
  <div id="solr-ef-container" class="container container-panel">

    <div id="htrc-alert-dialog" title="Alert">
      <p id="htrc-alert-body">
      </p>
    </div>

    <div id="htrc-login-dialog" title="Login" style="padding: 0;">
      <p id="htrc-login-body" style="margin: 0px;">
      </p>
    </div>

    <div id="htrc-publish-dialog" title="Save Search Results as Workset">

      <!--
	  <p id="htrc-publish-body" style="color: red; font-size: 120%;">
	    This feature of the Extracted Features Solr Search site is a placeholder.
	    The form below is disable, as it is currently non-functional.
	  </p>

	  <div class="disabled-div">
	    -->
      
      <p id="htrc-publish-body">	 
	Saving the result set as a workset in the
	HathiTrust Research Center Registry:
      </p>
      <form class="publish-workset-form">
	<div>
	  <div>
	    Workset Title:
	  </div>
	  <input id="publish-ws-title" type="text"/>
	</div>
	
	<div>
	  <div>
	    Workset Creator:
	  </div>
	  <input id="publish-username" type="text" disabled="disabled" />
	</div>
	
	<div>
	  <div>
	    Abstract:
	  </div>
	  <textarea id="publish-ws-abstract"
		    placeholder="Please enter an abstract of your workset"></textarea>
	</div>
	
	<div>
	  <div>
	    Criteria:
	  </div>
	  <textarea id="publish-ws-criteria"
		    placeholder="What was the criteria established for including items in this workset?"></textarea>
	</div>
	
	<div>
	  <div>
	    Research Motivation:
	  </div>
	  <textarea id="publish-ws-motivation"
		    placeholder="What was the research motivation for forming this workset?"></textarea>
	</div>
	
      </form>
      <!--
	  </div>
	-->
    </div>
    
    <div class="row" style="padding-top: 10px; font-size: 17px; line-height: 27px;">
      <div class="col-md-12">
	
	<h2 id="solr-ef-title" style="font-size: 125%;">
	  <i>Workset Builder 2.0 (Beta)</i> <br/>
	  Search the Extracted Features Dataset
	  
	  <span id="solr-col-name" style="font-size: 40%;"></span>
	</h2>

	<div id="solr-ef-description">
	<p>This experimental tool allows you to build worksets from unigram queries over the <a href="http://dx.doi.org/10.13012/J8X63JT3">HTRC Extracted Features</a> dataset.</p>
	<p>This dataset contains data and metadata extracted from volumes in HathiTrust. Add entire volumes or single pages from your search results to your selection basket. If you want more full-text search flexibility, <a href="https://www.hathitrust.org/">use the HathiTrust Digital Library</a>. Create an HTRC workset from your selection or download the associated metadata.</p>

<p>This tool is still in development and we anticipate that it will change through 2019-2020.</p>

<p>Currently searches 15.7 million volumes (out of HathiTrust’s 17 million volumes).</p>
	</div>
	
	<div id="tabs-search">
	  <div style="float: right; padding: 10px;">
	    <div id="show-hide-query-tabs-box"
		 style="width: 20px; height: 20px;" title="Hide query input area">
	      <div style="text-align: center; vertical-align: middle; line-height: 20px;">
		<span id="show-hide-query-tabs-turnstyle">
		  <span class="ui-icon ui-icon-triangle-1-s"></span>
		</span>
	      </div>
	    </div>
	  </div>
	  <ul>
	    <li><a id="tab-page"     href="#tabs-shared">Text</a></li>
	    <li><a id="tab-volume"   href="#tabs-shared">Metadata</a></li>
	    <li><a id="tab-combined" href="#tabs-shared">Combined</a></li>
	    <li><a id="tab-advanced" href="#tabs-shared">Advanced</a></li>
	  </ul>
	  <div id="tabs-shared">
	    
	    
	    <form id="search-form">
	      <input type="hidden" id="start" name="start" value="0"/>
	      
	      <table class="query-table">
		<tbody>
		  <tr class="volume-query-row">
		    <td style="padding-top: 8px;" >Volume Metadata:</td>
		    <td style="width: 610px;">
		      <input type="text"   class="search-in-progress" id="vq" name="vq"
			       placeholder="field:term e.g., title_t:shakespeare"
			       style="width: 425px; padding: 3px;"/>
		      <fieldset id="volume-query-field" style="display: inline">
		      </fieldset>
		      <!-- ****
			   The following part of the interface is now depricated in favour of a pull-down menu 
			   for specifying volume field to search by (including search all volume fields)
		      <br />
		      <nobr>
			<input type="checkbox" id="search-all-vfields" name="search-all-vfields" value="on" />
			Search all volume fields
		      </nobr>
		      -->		      
		    </td>
		    
		    <td>
		      <span id="volume-help" style="cursor: help"><span class="ui-icon ui-icon-info"></span> Help</span>
		    </td>		      
		  </tr>
		  <tr class="volume-query-row">
		    <td></td>
		    <td style="color: #aaaaaa; width: 400px; font-size: 14px; line-height: 16px; padding-bottom: 10px;">
		      
		      <div id="volume-help-dialog"
			   title="Help: Query Volume Metadata"
			   style="height: 500px;">
			<div id="volume-help-body">
			 
			  <p>Volume-level metadata searching is not case-sensitive.</p>

			  <p>Unless you specify a metadata field to search, the default is to search the title field.</p>

			  <p>To search for a phrase, use quotes around your search (“like this”).</p>
		
			  <p>To search all metadata fields, tick the Search all metadata fields below the search box.</p>
	
			  <p>To search specific volume metadata fields use the field:term form, such as names_t:Austen or names_t:"Austen, Jane" for a phrase-based search.</p>
	
			  <p>Wildcard matching includes using '?' for a single character and '*' for multiple characters. For example 'canad?' and '*land'.</p>
 
			  <p>
			    In alphabetical order, the indexed codes are:
			  </p>
			  
			  <div id="volume-help-fields" class="help-dialog-inset">
			  </div>
			  
			  <p>
			    A similar situation exists for the volume format field <i>format_t</i>.
			    The mnemonics used for this are:			    
 			  </p>
			  
			  <div id="volume-help-format" class="help-dialog-inset">
			  </div>
			  
			  
			  <p>
			    The field <i>pubPlace_t</i> is mnemonically coded, for
			    example using <i>nyu</i> to represent <i>New York (State)</i>.
			    So, to search for volumes published in this state, you
			    would enter the term <i>pubPlace_t:nyu</i>.
			  </p>
			  
			  <p>
			    The full set of mnemonics used are:			    
 			  </p>
			  
			  <div id="volume-help-pubplace" class="help-dialog-inset" style="font-size: 80%;">
			  </div>
			  
			  
			  <p>
			    A similar situation exists for the language field <i>language_t</i>.
			    The mnemonics used for this are:			    
 			  </p>
			  
			  <div id="volume-help-language" class="help-dialog-inset" style="font-size: 80%;">
			  </div>
			  
			  <p>
			    A similar situation exists for the copyright field <i>rights_t</i>.
			    The mnemonics used for this are:			    
 			  </p>
			  
			  <div id="volume-help-rights" class="help-dialog-inset" style="font-size: 80%;">
			  </div>
			  
			  
			</div>
		      </div>		      
		    </td>
		  </tr>
		  
		  <tr class="page-query-row">
		    <td style="padding-top: 8px;">Page-level Text:</td>
		    <td>
		      <input type="text"   class="search-in-progress" id="q" name="q"
			     style="width: 600px; padding: 3px;"/>
		    </td>
		    <td>
		      <span id="page-help" style="cursor: help"><span class="ui-icon ui-icon-info"></span> Help</span>

		      <div id="page-help-dialog"
			   title="Help: Query Page Metadata"
			   style="height: 500px;">
			<div id="page-help-body">

			  <p>To search page text, enter a term in the search box. This search is not case-sensitive. For phrased-based searching quote the words "like this".</p>

			  <p>Your search will return the individual pages in a volume where your search term was found. To return the entire volume instead, tick the Sort & Group by volume checkbox below the search box.</p>

			  <p>By default, your search will be conducted on pages recognized as English. Click “Search all Languages” if you prefer to search everything. Choose a different language from those that appear under “Show other languages.”</p>

			  <p>Limit your search to a specific part-of-speech by using the checkboxes under the language. Not all of the languages have the functionality to search by part-of-speech.</p>

			  <p>Wildcard matching includes using '?' for a single character and '*' for multiple characters. For example 'canad?' and '*land'.</p>
			</div>
		      </div>		      		      
		    </td>		      				    
		  </tr>
		  
		  <tr class="advanced-query-row">
		    <td>
		      Raw Solr Query:
		    </td>
		    <td>
		      <textarea id="advanced-q" rows="5" cols="69"
				placeholder="Enter query using raw Solr syntax"></textarea>
		    </td>
		    <td>
		      <span id="advanced-query-help" style="cursor: help">
			<span class="ui-icon ui-icon-info"></span> Help
		      </span>

		      <div id="advanced-query-help-dialog"
			   title="Help: Advanced Query"
			   style="height: 500px;">
			<div id="advanced-query-help-body">

			  <p>
			    Advancecd quries can be expressed directly using the Solr Query syntax.
			    A concise guide on this can be found at
			    <a href="http://www.solrtutorial.com/solr-query-syntax.html" target="_blank">Solr Tutorial</a>.
			    For comprehensive documentation see the
			    <a href="https://lucene.apache.org/solr/guide/6_6/the-standard-query-parser.html#the-standard-query-parser" target="_blank">
			      Apache Solr Reference
			    </a>.
			  </p>
			</div>
		      </div>
		      
		    </td>
		  </tr>

		  <tr class="page-or-advanced-query-row">
		    <td>
		    </td>
		    <td>
		      <nobr>
			<input type="checkbox" id="group-results-by-vol" name="group-results-by-vol" value="on" />
			<span>Sort &amp; Group by Volume</span>
		      </nobr>
		    </td>
		  </tr>

		  <tr>
		    <td></td>
		    <td>
		      <button class="search-in-progress" id="search-submit" style="float: right;">Search</button>
		      <!--
			  <fieldset id="tokenize-mode" style="float: right; padding-right: 10px;">
			    <span>Tokenize check:</span>
			    <input type="radio" name="tokenize-mode" id="tokenize-on" checked="checked" />
			    <label for="tokenize-on">On</label>
			    <input type="radio" name="tokenize-mode" id="tokenize-off" />
			    <label for="tokenize-off">Off</label>
			  </fieldset>
			  -->

		    </td>
		    <td>
		    </td>
		  </tr>
		</tbody>
	      </table>

	      

	      <div class="page-query-row">
		<input type="checkbox" id="search-all-langs"    name="search-all-langs"     value="on" />&nbsp;Search pages in all languages
		
		<div id="pos-fieldsets">
		</div>		
		
		<fieldset class="show-hide-lang">
		  <legend style="margin-bottom: 5px; padding-top: 15px;">
		    Other Languages (part-of-speech not available)
		  </legend>
		  <div id="other-langs">
		  </div>
		</fieldset>
	      </div>

	    </form>

	  </div> <!-- end of tabs -->
	</div> <!-- end of tab wrapper -->

      </div>
    </div>

    <hr />
    <div id="search-results-area" class="search-in-progress" style="position: relative; min-height: 50px;">
      <div id="search-results-anchor" style="position: absolute; top: -90px;">
      </div>

      <div id="search-indeterminate-div" class="search-indeterminate" style="display:none;">
	<span class="progressbar-margin progressbar-label" >
	  <span id="search-indeterminate-label"></span>
	</span>
	<div style="height: 34px;">
	  <div class="progressbar-margin progressbar-cancel">	    
	    <span id="search-indeterminate-cancel" class="custom-ui-icon cancelIcon" title="Cancel search" />
	  </div>
	  <div id="search-indeterminate-progressbar" class="progressbar-margin" style="float: left; margin-right: 0px;"></div>
	</div>
      </div>

      <div id="search-results-page" class="con page centered" style="display: none;">
	
	<div class="facets sidebar">
          <div id="selectedFacets" class="advancedSelectedFacets">
	    <h3>Applied Filters</h3>
            <ul class="filters  list-unstyled">
	      
            </ul>
	  </div>

	  <div style="position: relative;">
	    <div id="export-by" class="narrow" style="position: absolute; left:0;top:-24px; z-index: 2;">
	      <h3 class="narrowexport" >&nbsp;</h3>
	      <div>
		<div id="export-by-vol-div" class="tightoddevenline" style="display: none">
		  <a id="export-by-vol"  class="export-item" 
		     download="htrc-volume-export.json" target="_blank">
		    <span class="ui-icon ui-icon-circle-arrow-s"></span> Volume IDs
		  </a>
		</div>
		<div id="export-by-page-div" class="tightoddevenline" style="display: none">
		  <a id="export-by-page" class="export-item"
		     download="htrc-page-export.json" target="_blank">
		    <span class="ui-icon ui-icon-circle-arrow-s"></span> Page IDs
		  </a>
		</div>
		<div id="export-ef-metadata-div" class="export-item tightoddevenline" style="display: none">
		  <span class="ui-icon ui-icon-circle-arrow-s"></span>
		  Volume Metadata:
		  <div style="margin-top: -2px; padding-bottom: 2px;">
		    <a id="export-ef-metadata-json" class="export-item" style="display: inline; padding-left: 20px;"
		       download="htrc-metadata-export.json">
		      JSON
		    </a>, 
		    <a id="export-ef-metadata-csv" class="export-item" style="display: inline;"
		       download="htrc-metadata-export.csv">
		      CSV
		    </a>,
		    <a id="export-ef-metadata-tsv" class="export-item" style="display: inline;"
		       download="htrc-metadata-export.tsv">
		      TSV
		    </a>
		  </div>
		</div>
		<div id="export-ef-zip-div" class="tightoddevenline" style="display: none">
		  <a id="export-ef-zip" class="export-item"
		     download="download">
		    <span class="ui-icon ui-icon-circle-arrow-s"></span> JSON Extracted Features (ZIP) 
		  </a>
		</div>
		<div id="export-ef-to-registry-div" class="tightoddevenline" style="display: none">
		  <a id="export-ef-to-registry" class="export-item"
		     download="download">
		    <span class="ui-icon ui-icon-circle-arrow-s"></span> 
		    <span id="export-ef-to-registry-text">Save as Workset</span>
		  </a>
		</div>
	      </div>
            </div>

	    
	    <div id="status-export-by"
		 style="position: absolute; left:0;top:-24px; z-index: 2;">
	      <div>
		<h3 class="narrowexport" id="export-header"><span class="ui-icon ui-icon-search"></span>Export Search Results</h3>
		<!--
		    <span id="XXXX-search-results-total-span"></span>
		    -->
		<span class="exp-vol-count-span" style="display:none;">
		  <span class="exp-vol-count-computing">[computing volume count ...]</span>
		  <span id="exp-vol-count-sidebar" class="exp-vol-count"></span> 
		</span>
	      </div>
	    </div>

	    <div id="coverup-export-by"
		 style="position: relative; z-index: 1; visibility: hidden;">
	      <h3 class="narrowexport"><span class="ui-icon ui-icon-search"></span>Export Search Results</h3>
	      <div>
		<div class="tightoddevenline">
		  <a id="coverup-export-by-vol"  class="export-item"
		     download="htrc-volume-export.json" target="_blank">
		    <span class="ui-icon ui-icon-circle-arrow-s"></span> Volume IDs
		  </a>
		</div>
		<div class="tightoddevenline">
		  <a id="coverup-export-by-page" class="export-item"
		     download="htrc-page-export.json" target="_blank">
		    <span class="ui-icon ui-icon-circle-arrow-s"></span> Page IDs
		  </a>
		</div>
		<div id="coverup-export-ef-metadata" class="export-item tightoddevenline">
		  <span class="ui-icon ui-icon-circle-arrow-s"></span>
		  Volume Metadata:
		  <div style="margin-top: -2px; padding-bottom: 2px;">
		    <a id="coverup-export-ef-metadata-json" class="export-item" style="display: inline; padding-left: 20px;"
		       download="htrc-metadata-export.json">
		      JSON
		    </a>, 
		    <a id="coverup-export-ef-metadata-csv" class="export-item" style="display: inline;"
		       download="htrc-metadata-export.csv">
		      CSV
		    </a>,
		    <a id="coverup-export-ef-metadata-tsv" class="export-item" style="display: inline;"
		       download="htrc-metadata-export.tsv">
		      TSV
		    </a>
		  </div>
		</div>
		<div class="tightoddevenline">
		  <a id="coverup-export-ef-zip" class="export-item"
		     download="download">
		    <span class="ui-icon ui-icon-circle-arrow-s"></span> JSON Extracted Features (ZIP) 
		  </a>
		</div>
		<div class="tightoddevenline" style="display: none"> <!-- **** -->
		  <a id="coverup-export-ef-to-registry" class="export-item"
		     download="download">
		    <span class="ui-icon ui-icon-circle-arrow-s"></span> Save as Workset
		  </a>
		</div>
	      </div>
	      
	    </div>	  
	    
	  </div>

          <div class="narrow">
            <h3 class="narrowsearch" style="display: none">Refine Results
	      <span id="facet-units" class="page-count"></span></h3>
            <div id="facetlist">
	      
            </div>
          </div>
	</div>

	<div class="main">

	  <div id="droppable-targets" class="drag-and-drop-style">
	    <div id="trashcan-drop" style="display: none; float: left"
		 titleXXXX="Click on item(s) in the result list to select them and then drag them on to the trash can to delete" >
	    </div>

	    <div id="shoppingcart-drop-wrapper" style="display: none; float: right; position: relative">
	      <div id="shoppingcart-drop" style="position: relative">
	      </div>
	      <div id="shoppingcart-label"
		   style="position: absolute; bottom: -10px; left: 15px; font-style: italic; font-size: 90%">(0 items)</div>
	    </div>

	    <div id="tr-add-delete-wrapper" class="checkbox-style">
	      <form style="float: right; padding-top: 20px;">
		<button id="tr-delete-item" class="adi-delete sr-add-delete-item">Delete <span class="custom-ui-icon trashcan-empty24" /></button>
		<button id="tr-add-item"    class="adi-add    sr-add-delete-item">Add <span class="custom-ui-icon basket-empty24" /></button>
		<button id="tr-goto-cart"   class="adi-goto   sr-add-delete-item">View basket<span class="ui-icon ui-icon-arrowthick-1-e"/></button>
	      </form>
	      <!--
		  <div style="clear:both;"></div>
		  <hr />		  
		  -->
	    </div>

	    
	    <div style="clear:both"></div>	  
	  </div>
	<div id="shoppingcart-info-area" style="display:none; padding-bottom: 20px;">
	  <div id="shoppingcart-info-wrapper" style="float: left; position: relative">
	    <div id="shoppingcart-info" style="position: relative">
	    </div>
	    <div id="shoppingcart-info-label"
		 style="position: absolute; bottom: -10px; left: 15px; font-style: italic; font-size: 90%">(0 items)
	    </div>
	  </div>
	  <div style="padding-top:20px; padding-bottom:10px;">
	    Selection Cart ID: <input type="text" id="shoppingcart-info-id" size="60" readonly="readonly" />
	    <div style="display: inline;">
	      <button id="shoppingcart-info-id-export-as-workset">Export as Workset</button>
	      &nbsp;<span id="shoppingcart-info-id-export-as-workset-clarification" style="font-style: italic; font-size:85%;"></span>
	    </div>
	    
	  </div>
	  <div><button id="shoppingcart-info-empty">Empty Selection</button></div>

	  <div style="clear:both"></div>	  
	</div>

	  

	  <div id="search-results-total">
	    <div style="float:left;">
	      <span id="search-results-total-span"></span>
	      <span id="srt-vol-count-span" class="exp-vol-count-span" style="display:none;">
		<span id="srt-vol-count-computing" class="exp-vol-count-computing">[computing volume count ...]</span>
		<span id="srt-vol-count" class="exp-vol-count"></span> 
	      </span>
	    </div>
	    
	    <div style="float:right; widthXXXX: 144px;">
	      <div class="search-loading-more" style="display:none;">
		<span class="progressbar-label">Loading more results: </span>
		<div id="search-lm-progressbar-top"></div>
	      </div>
	    </div>

	    <div style="clear:both"></div>
	    
	  </div>
	  <div id="search-explain">
	  </div>
	  <div id="search-showing-wrapper">
	    <hr />
	    <div id="search-showing" style="float:left;">
	    </div>
	    <div id="select-for-shoppingcart" style="float:right;">
	      <form>
		<button id="sr-select-all" class="sr-item-multisel">Select All On This Page</button>
		<button id="sr-deselect-all" class="sr-item-multisel" disabled="disabled">Deselect All</button>
		<button id="sr-invert-selection" class="sr-item-multisel" disabled="disabled">Invert Selection</button>
	      </form>
	    </div>
	    <div style="clear:both; padding-bottom: 7px;"></div>
	  </div>

      	  <div id="search-results">	  
	  </div>
	  
      	  <div class="search-loading-more" style="display:none;">
	    <span class="progressbar-label">Loading more results: </span>
	    <div id="search-lm-progressbar-bot"></div>	    
	  </div>

	  <div id="sr-add-delete-wrapper" class="checkbox-style">
	    <form style="float: right; padding-bottom: 5px;">
	      <button id="sr-delete-item" class="adi-delete sr-add-delete-item">Delete <span class="custom-ui-icon trashcan-empty24" /></button>
	      <button id="sr-add-item"    class="adi-add    sr-add-delete-item">Add <span class="custom-ui-icon basket-empty24" /></button>
	      <button id="sr-goto-cart"   class="adi-goto   sr-add-delete-item">View basket<span class="ui-icon ui-icon-arrowthick-1-e"/></button>
	    </form>
	    <div style="clear:both;"></div>
	    <hr />		  
	  </div>
	  
	  <div id="next-prev" style="display:none;">
	    <div style="width:100%;">
	      <hr />
	      <div id="search-prev" style="float: left;">
		<a><span class="ui-icon ui-icon-circle-triangle-w"></span>Previous</a>
	      </div>
	      <div id="search-next" style="float: right;">
		<a>Next<span class="ui-icon ui-icon-circle-triangle-e"></span></a>
	      </div>
	    </div>
	  </div>
	  <div id="page-bar">	  
	  </div>

	</div>      
	
      </div>
      

     
    </div>
    <!-- end of search-results-area -->
  </div>
  <!-- **solr-ef-container:end** -->
  
</div>

