<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    
    <title>HTRC Page-Level Extracted Feature Solr Search</title>
    
    <link rel="shortcut icon" href="https://analytics.hathitrust.org/assets/images/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <link href="assets/bootstrap.css" rel="stylesheet" />
    <link href="assets/main.css" rel="stylesheet" />
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-42842720-11"></script>
    <script type="text/javascript">
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-42842720-11');
    </script>
    
    <script src="assets/jquery-1.12.4.js" type="text/javascript"></script>    
    <script src="assets/bootstrap.js" type="text/javascript"></script>
    <script src="assets/jquery-ui-lightness-1.12.1/jquery-ui.min.js" type="text/javascript"></script>
  </head>

  <body>
    <!-- navbar -->
    
    <div id="solr-ef-search-type" data-react-component="false">
    <div id="solr-ef-container-loading" class="container container-panel" style="paddingBottom: 6pt">
      Loading ...
    </div>
    <div id="solr-ef-container-dynamic-load" style="display: none;"><!-- dynamic body insert --></div>
    <script type="text/javascript">
      var runtime_mode = (document.location.pathname.match(/\/[^\/]*-dev.*$/,"\/")) ? "dev" : "prod";
      $(document).ready(function() {
        var abs_url_prefix = document.location.pathname.replace(/\/[^\/]*$/,"\/");
        $.get(abs_url_prefix+"index-body-dl.html", function(data,status) {
  	  $.ajax({
	        url: abs_url_prefix+"index-body-dl.js",
	        dataType: "script",
                success: function() {
                  $('#solr-ef-container-dynamic-load').html(data);                  
                }
          });
	});
      });
    </script>

    
    <div id="additional-resources" class="container htrcdoc" style="display:none;">
      <h4>Additional Resources</h4>
      <ul>
	<li><i>Total Disk Usage of 16-Core x 2 Replication Solr Collection: 4.68TB (5.7 billion pages indexed, docs not stored)</i></li>
	<script type="text/javascript">
	  if (runtime_mode == "dev") {
	    document.writeln('<li>Currently accessing the Development Version ... <a href="index.html">Switch to public-facing production interface</a></li>');
	  }
	  else {	
	    document.writeln('<li><a href="index-dev.html">Check out the newer in-development (bleeding edge) version</a></li>');
	  }
	</script>
      </ul>

      <hr />
      <h5>Alternative Collections to Try Out</h5>
      <ul>
	<!--
	<li><b>Switch to <a href="?solr-col=solr3456-faceted-htrc-full-ef16">New Robust Full Collection [16 Shard x 2 Replication Zookeeper Ensemble Solr3-6]</a> (indexing in progress)</b></li>
	-->
	<li><b>Switch to <a href="?solr-col=faceted-htrc-full-ef20">Original Full Collection [20 Shard x 1 Replication Zookeeper Solr1-2]</a></b></li>
	
	<li>Switch to Ted's <i>FictMeta</i> 32205 sample collection:</li>
	<ul>
	  <li>
	    <a href="?solr-col=dbbridge-fictmeta32205-baseline">Solr Schema Baseline version</a>
	    <br />(ingest details: 1h 1min to build, 5.98 GB index; incremental not possible)
	  </li>
	  <li>
	    <a href="?solr-col=dbbridge-fictmeta32205-docvals">Solr Schema DocVals version</a>
	    <br />(ingest details: 1h 4mins to build, 6.47 GB index; incremental update of volume-level metadata possible)
	  </li>
	  <li>
	    <a href="?solr-col=dbbridge-fictmeta32205-storeall">Solr Schema StoreAll version</a>
	    <br />(ingest details: 1h 5mins to build, 19.90 GB index; fully incremental)
	  </li>
	</ul>
	<li>Try out Concepts in <i>FictMeta</i> 1055 sample collection:</li>
	
	<ul>
	  <li>
	    <a href="?solr-col=	dbbridge-fict1055-htrc-configs-storeall&solr-q=concept_t:Bank">Version 1: Storeall with Concepts (concept_t:Bank)</a>
	  </li>
	  <li>
	    <a href="?solr-col=annika-fict1055-norm-stopwords-htrc-configs-storeall&solr-q=concept_t:Bank">Version 2: Storeall with Concepts (concept_t:Bank)</a>
	  </li>
	</ul>
      </ul>

      <hr />
      <h5>For Developers</h5>
      <p>
	The Solr index built to support POS Extracted Features
        searching is strongly based around the dynamic fields that are
        part of the default managed schema provided in the Apache
        project.  The key variation made to this schema is that the
        <tt>_txt</tt> dynamic field is <i>not stored</i>.
      <p>
	The <tt>_t</tt> dynamic field remains unchanged and <i>is
	stored</i>.  This provides a useful way to retrieve metadata
	about matching items when producing the result set page in
	response to a query.  Both <tt>_txt</tt> and <tt>_t</tt>
	are used to perform queries at the volume-level.
      </p>
      <p>
	The dynamic field <tt>_htrctokentext</tt> field is very similar to
	<tt>_txt</tt> but used for page-level indexed fields.
      </p>
      <p>
	For faceting, it is important that multiple word terms (such as <i>non fiction</i>)
	remain as a single entity, and are not tokenized into separate words.  This
	leads to the use of dynamic fields such as <tt>_s</tt>, <tt>_ss</tt> at the
	volume-level when metadata can, respectively, only have one value (e.g., Copyright)
	and multiple values (e.g., Genre).  At the page-level the dynamic fields used
	are <tt>_htrcstring</tt> and <tt>htrcstrings</tt>.
      </p>
      <p>
	For more details, see <a href="docs/README-Solr-Schema.txt">README-Solr-Schema.txt</a>.
      </p>
      
      <ul>
	<li><a target="_blank" href="solr-ef-query-api.txt">Examples of POS Solr-EF searching directly using the SOLR API</a></li>
	<li><a target="_blank" href="docs/htrc-configs-docvals/conf/managed-schema">Customized Solr Schema (conf/managed-schema);</a>
	  comments with 'htrc' prefix mark where changes from, and new additions to, the default configuration have been made.</li>
	<li><a target="_blank" href="/htrc-ef-access/get?action=">View details about the HTRC Extracted Feature API</a>;
	  Used to support features such as download JSON extracted feature files, and producing a hash-value to represent
	  a user's query.</li>
	<li><a target="_blank" href="/robust-solr/index.html">Robust HTRC-EF Solr Admin UI (log in)</a></li>
	<li><a target="_blank" href="/solr/luke_lang_mappings.html">Dynamically Generated Language Map (Part-of-Speech, and Other)</a></li>
	<li><a target="_blank" href="/solr/htrc-full-ef20_shard6_replica1/admin/luke">Luke XML example shard</a></li>
      </ul>

      <hr />
      <h5>Deprecated</h5>
      <ul>
	<li><a href="stream-query.html">Stream based combined Volume Metadata and Page-level POS Term searching (deprecated)</a></li>
	<!--
	<li><a href="?solr-col=faceted-htrc-fictsample-ef20">Switch to Ted's <i>FictMeta</i> 1055 samples collection</a></li>
	-->
      </ul>
    </div>


    
    <div id="push"></div>
        
    <div class="modal fade" id="create-collection-modal" aria-hidden="true" tabindex="-1" role="dialog">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title">Create Workset</h4>
          </div>
          <div class="modal-body">
            <p>You are being redirected to the Workset 
	      Builder.
              If this is the first time accessing it 
	      during this browser session,
              you will need to select "Login" from the 
	      top-right menu bar before creating or modifying a workset.
              We are aware this is inconvenient and we're 
	      working on a technical solution to eliminate this requirement.</p>
          </div>
          <div class="modal-footer">
            <span class="pull-left" style="padding-top : 5 px ;"><input id="dont-show" style="margin : - 3 px 0 0 ;" type="checkbox" />
              Don't Show This Again.</span>
            <a href="#" class="btn btn-link btn-sm" data-dismiss="modal" aria-hidden="true">Cancel</a>
            <a id="modal-wb-url" href="" class="btn btn-sm btn-primary" onclick="goToCreateCollection ( )">
              Go</a>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="login-required-modal" aria-hidden="true" tabindex="-1" role="dialog">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title">Please Sign in</h4>
          </div>
          <div class="modal-body">
            <p>You need to sign in to access this functionality.</p>
          </div>
          <div class="modal-footer">
            
            
            <a href="#" class="btn btn-link btn-sm" data-dismiss="modal" aria-hidden="true">Cancel</a>
            <a id="modal-target-url" href="" data-toggle="modal" class="btn btn-sm btn-primary">
              Go</a>
          </div>
        </div>
      </div>
    </div>
    
  </body>
</html>
